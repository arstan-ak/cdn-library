# Authorization using signature

## Installation

```bash
npm i @mancho.devs/authorizer
```

### Verify:

Prepare `requestData` from request.

In order to verify `signature` you need only `publicKey`. Example for verify:

```ts
import { Signer } from '@mancho.devs/authorizer';

const requestData: RequestData = {
  body: { payment: 'payment', amount: 100 },
  headers: {
    Host: 'api.paymentsgateway.averspay.kg',
    'x-api-timestamp': '1636026186643',
    'x-api-key': 'h8z1TDStxu5YY2YuN8jUa9hpzIVbfkLT7kPiPiYj',
    'x-api-header': 'header value',
    'X-Forwarded-For': '54.187.127.20, 15.158.4.100',
    'X-Forwarded-Port': '443',
    'X-Forwarded-Proto': 'https',
  },
  httpMethod: 'POST',
  path: '/services',
  queryStringParameters: {
    from: '0',
    size: '10',
    test: undefined,
    best: 'тест дата',
  },
};

const isValid = await new Signer(requestData).verify(publicKey, signature);
```

if `isValid` is `True` then `signature` is valid otherwise `signature` is invalid.


### Create signature

Prepare `requestData` from request.

In order to create `signature` you need only `privateKey`. Example for create `signature`:

```ts
import { Signer } from '@mancho.devs/authorizer';

const requestData: RequestData = {
  body: { payment: 'payment', amount: 100 },
  headers: {
    Host: 'api.paymentsgateway.averspay.kg',
    'x-api-timestamp': '1636026186643',
    'x-api-key': 'h8z1TDStxu5YY2YuN8jUa9hpzIVbfkLT7kPiPiYj',
    'x-api-header': 'header value',
    'X-Forwarded-For': '54.187.127.20, 15.158.4.100',
    'X-Forwarded-Port': '443',
    'X-Forwarded-Proto': 'https',
  },
  httpMethod: 'POST',
  path: '/services',
  queryStringParameters: {
    from: '0',
    size: '10',
    test: undefined,
    best: 'тест дата',
  },
};

const signature = await new Signer(requestData).sign(privateKey);
```
